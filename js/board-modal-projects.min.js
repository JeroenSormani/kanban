!function($){$.fn.modal_projects=function(){return this.each(function(){var r=$(this);r.on("show.bs.modal",function(){$("#accordion-projects").empty();for(var r in project_records){var t=project_records[r];t.task_count=0;for(var e in task_records)task_records[e].project_id==t.id&&t.task_count++;var o=$(t_modal_projects_panel.render(t));o.appendTo("#accordion-projects")}}),r.on("click",".btn-delete",function(){var r=$(this),t=r.closest(".panel"),e=t.attr("data-id"),o=JSON.parse(JSON.stringify(project_records[e]));o.action="delete_project",o.kanban_nonce=$("#kanban_nonce").val(),$.ajax({method:"POST",url:ajaxurl,data:o}).done(function(r){delete project_records[e];for(var o in task_records)task_records[o].project_id==e&&(task_records[o].project_id=0,$("#task-"+task_records[o].ID).trigger("save").trigger("populate_project"));t.remove()}).always(function(r){show_growl_msg(r)})}),r.on("focus",".project_title",function(){var r=$(this);r.data("orig",r.val())}),r.on("keyup",".project_title",function(r){var t=$(this);if(13==r.keyCode)return t.trigger("blur"),!1;if(27==r.keyCode){var e=t.data("orig");return t.val(e).trigger("blur"),!1}}),r.on("blur",".project_title",function(){var r=$(this),t=r.val(),e=r.closest(".panel"),o=e.attr("data-id");project_records[o].title=t;var a={project:project_records[o]};a.action="save_project",a.kanban_nonce=$("#kanban_nonce").val(),$.ajax({method:"POST",url:ajaxurl,data:a}).done(function(r){for(var t in task_records)$("#task-"+task_records[t].id).trigger("populate_project");var a=project_records[o],n=$(t_modal_projects_panel.render(a));e.replaceWith(n),$(".collapse",n).addClass("in")}).always(function(r){show_growl_msg(r)})})})}}(jQuery);