!function($){$.fn.board_filter=function(e){return this.each(function(){var e=$(this),r=new t($("#t-filter-project").html()),a=new t($("#t-filter-user").html()),o=$("#filter-projects-dropdown",e),i=$("#filter-users-dropdown",e);$("#filter-projects",e).on("show.bs.dropdown",function(){$(".project",o).remove();for(var t in project_records){var e=$(r.render(project_records[t]));e.prependTo(o)}}),o.on("click","a",function(){var t=$(this),r=t.attr("data-id"),a=project_records[r];"undefined"==typeof a&&(a={post_title:t.text()});var o=t.closest(".dropup"),i=$(".btn-label",o);return"undefined"==typeof i.attr("data-orig")&&i.attr("data-orig",i.text()),i.text(a.post_title).attr("data-id",r),$("#btn-filter-apply",e).trigger("click"),!1}),$("#filter-users",e).on("show.bs.dropdown",function(){$(".user",i).remove();for(var t in allowed_users){var e=$(a.render(allowed_users[t]));e.prependTo(i)}}),i.on("click","a",function(){var t=$(this),r=t.attr("data-id"),a=allowed_users[r];"undefined"==typeof a&&(a={data:{long_name_email:t.text()}});var o=t.closest(".dropup"),i=$(".btn-label",o);return"undefined"==typeof i.attr("data-orig")&&i.attr("data-orig",i.text()),i.text(a.data.long_name_email).attr("data-id",r),$("#btn-filter-apply",e).trigger("click"),!1}),$("#btn-filter-apply",e).on("click",function(){$("#btn-filter-reset").show();var t="",e="#",r=$("#filter-projects .btn-label").attr("data-id");"undefined"!=typeof r&&""!=r&&(t+="[data-project-id="+r+"]",e+="filter_project="+r+"&");var a=$("#filter-users .btn-label").attr("data-id");"undefined"!=typeof a&&""!=a&&(t+="[data-assigned-to="+a+"]",e+="filter_user="+a+"&");var o=$(".task"+t);location.hash=e,$(".task").not(o).slideUp("fast"),o.slideDown("fast")}),$("#btn-filter-reset",e).on("click",function(){$(this).hide(),$(".task:not(:visible)").slideDown("fast"),$("#filter-wrapper .btn-label").each(function(){var t=$(this);t.attr("data-id","").text(t.attr("data-orig"))}),location.hash="#"})})}}(jQuery);