!function($){$.fn.board_filter=function(e){return this.each(function(){var e=$(this),r=new t($("#t-filter-project").html()),a=new t($("#t-filter-user").html()),o=$("#filter-projects-dropdown",e),n=$("#filter-users-dropdown",e);$("#filter-projects",e).on("show.bs.dropdown",function(){o.empty();for(var t in project_records){var e=$(r.render(project_records[t]));e.appendTo(o)}}),o.on("click","a",function(){var t=$(this),e=t.attr("data-id"),r=project_records[e];if("undefined"==typeof r)return!1;var a=t.closest(".dropup"),o=$(".btn-label",a);"undefined"==typeof o.attr("data-orig")&&o.attr("data-orig",o.text()),o.text(r.post_title).attr("data-id",e)}),$("#filter-users",e).on("show.bs.dropdown",function(){n.empty();for(var t in allowed_users){var e=$(a.render(allowed_users[t]));e.appendTo(n)}}),n.on("click","a",function(){var t=$(this),e=t.attr("data-id"),r=allowed_users[e],a=t.closest(".dropup"),o=$(".btn-label",a);"undefined"==typeof o.attr("data-orig")&&o.attr("data-orig",o.text()),o.text(r.data.long_name_email).attr("data-id",e)}),$("#btn-filter-apply",e).on("click",function(){$("#btn-filter-reset").show();var t=$("#filter-projects .btn-label").attr("data-id"),e="",r="";"undefined"!=typeof t&&""!=t&&(e+="[data-project-id="+t+"]",r+="filter_project="+t+"&");var a=$("#filter-users .btn-label").attr("data-id");"undefined"!=typeof a&&""!=a&&(e+="[data-assigned-to="+a+"]",r+="filter_user="+a+"&");var o=$(".task"+e);window.location.hash=r,$(".task").not(o).slideUp("fast"),o.slideDown("fast")}),$("#btn-filter-reset",e).on("click",function(){$(this).hide(),$(".task:not(:visible)").slideDown("fast"),$("#filter-wrapper .btn-label").each(function(){var t=$(this);t.attr("data-id","").text(t.attr("data-orig"))}),window.location.hash=""})})}}(jQuery);